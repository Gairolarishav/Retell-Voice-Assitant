{% extends "admin/change_form.html" %}
{% load static %}

{% block extrahead %}
    {{ block.super }}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            function toggleFields() {
                const callNow = document.querySelector('#id_call_now');
                const schedTime = document.querySelector('#id_scheduled_time');

                if (callNow.checked) {
                    schedTime.value = '';
                    schedTime.setAttribute('disabled', 'disabled');
                } else {
                    schedTime.removeAttribute('disabled');
                }

                if (schedTime.value) {
                    callNow.checked = false;
                    callNow.setAttribute('disabled', 'disabled');
                } else {
                    callNow.removeAttribute('disabled');
                }
            }

            document.querySelector('#id_call_now')?.addEventListener('change', toggleFields);
            document.querySelector('#id_scheduled_time')?.addEventListener('input', toggleFields);

            toggleFields(); // Call once on page load
        });
    </script>
{% endblock %}
